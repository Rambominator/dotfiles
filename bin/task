#!/usr/bin/env ruby
#encoding: utf-8

require 'thor'

class Tpad < Thor
  desc "g3", "poweroff 3g module"
  def g3
    system <<-EOF
    echo -n '0' | \
    sudo tee /sys/bus/usb/devices/2-1.4/power/autosuspend_delay_ms > /dev/null
    echo -n "auto" | \
    sudo tee /sys/bus/usb/devices/2-1.4/power/control > /dev/null
    sudo rmmod qcserial
    sudo rmmod usb_wwan
    sudo rmmod usbserial
    EOF
  end

  desc "nog3", "poweron 3g module"
  def nog3
    system <<-EOF
    echo -n '2000' | \
    sudo tee /sys/bus/usb/devices/2-1.4/power/autosuspend_delay_ms > /dev/null
    echo -n "on" | \
    sudo tee /sys/bus/usb/devices/2-1.4/power/control > /dev/null
    sudo modprobe qcserial
    sudo modprobe usb_wwan
    sudo modprobe usbserial
    EOF
  end

  desc "gps", "enable gps module"
  def gps
    system "echo '\$GPS_START' > /dev/ttyUSB2"
  end

  desc "nogps", "disable gps module"
  def nogps
    systwm "echo '\$GPS_STOP'  > /dev/ttyUSB2"
  end
end
